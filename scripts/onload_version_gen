#!/bin/sh

echo "// Autogenerated file, do not edit"
echo "#define ONLOAD_PRODUCT \"Onload\""
year=`date '+%Y'`
echo "#define ONLOAD_COPYRIGHT \"Copyright 2019-$year Xilinx, 2006-2019 Solarflare Communications, 2002-2005 Level 5 Networks\""
echo -n "#define ONLOAD_VERSION \""
if test -f `which git`; then
  hash=`git show -s --format="format:%h %cd"  --date=short HEAD`
  echo -n $hash
  human_name=`git symbolic-ref -q --short HEAD`
  test -z "$human_name" && human_name=`git describe --tags --exact-match`
  test -n "$human_name" && echo -n " $human_name"
else
  echo -n "<dev-snapshot>"
fi
echo "\""
